[gd_scene load_steps=17 format=2]

[ext_resource path="res://objects/characters/Player/PlayerSpawner.tscn" type="PackedScene" id=1]
[ext_resource path="res://objects/interface/canvas.tscn" type="PackedScene" id=2]
[ext_resource path="res://assets/scripts/furniture/RandomItems.cs" type="Script" id=3]
[ext_resource path="res://objects/props/furniture/cabinet.tscn" type="PackedScene" id=4]
[ext_resource path="res://objects/props/doors/door1.tscn" type="PackedScene" id=5]
[ext_resource path="res://assets/materials/physics/stone.phymat" type="PhysicsMaterial" id=6]
[ext_resource path="res://assets/materials/physics/wood.phymat" type="PhysicsMaterial" id=7]
[ext_resource path="res://objects/props/furniture/wall-terminal.tscn" type="PackedScene" id=8]
[ext_resource path="res://objects/characters/ponies/facetest.tscn" type="PackedScene" id=9]
[ext_resource path="res://assets/scripts/characters/NPC/CoversManager.cs" type="Script" id=11]
[ext_resource path="res://objects/props/furniture/metallic-cabinet.tscn" type="PackedScene" id=20]

[sub_resource type="PlaneMesh" id=1]

[sub_resource type="BoxShape" id=2]
extents = Vector3( 50, 0.1, 50 )

[sub_resource type="CubeMesh" id=3]

[sub_resource type="BoxShape" id=4]

[sub_resource type="NavigationMesh" id=5]
vertices = PoolVector3Array( -48.2, -0.78867, -6.2, -35, -0.78867, -6.2, -33.8, -0.78867, -7.1, -48.2, -0.78867, -16.7, -38.3, -0.78867, -48.2, -48.2, -0.78867, -48.2, -48.2, -0.78867, -37.7, -28.1, -0.78867, -48.2, -48.2, -0.78867, -37.7, -48.2, -0.78867, -27.2, -30.8, -0.78867, -6.8, -9.5, -0.78867, -22.7, -18.2, -0.78867, -48.2, -48.2, -0.78867, -16.7, -33.8, -0.78867, -7.1, -30.8, -0.78867, -6.8, -48.2, -0.78867, -27.2, -28.1, -0.78867, -48.2, -38.3, -0.78867, -48.2, -48.2, -0.78867, -37.7, -30.8, -0.78867, -6.8, -10.7, -0.78867, -15.8, -11, -0.78867, -21.2, -9.5, -0.78867, -22.7, -7.7, -0.78867, -22.7, -8, -0.78867, -48.2, -18.2, -0.78867, -48.2, -30.8, -0.78867, -6.8, -11, -0.78867, -21.2, -9.5, -0.78867, -22.7, 5.5, -0.78867, -22.7, 5.8, -0.78867, -48.2, -1.1, -0.78867, -48.2, -1.1, -0.78867, -22.7, -1.1, -0.78867, -48.2, -8, -0.78867, -48.2, -7.7, -0.78867, -22.7, -1.1, -0.78867, -22.7, 48.1, -0.78867, -41.3, 48.1, -0.78867, -48.2, 37.3, -0.78867, -48.2, 48.1, -0.78867, -34.1, 48.1, -0.78867, -41.3, 37.3, -0.78867, -48.2, 48.1, -0.78867, -26.9, 48.1, -0.78867, -34.1, 37.3, -0.78867, -48.2, 26.8, -0.78867, -48.2, 5.8, -0.78867, -48.2, 5.5, -0.78867, -22.7, 7.9, -0.78867, -22.4, 16.3, -0.78867, -48.2, 5.8, -0.78867, -48.2, 7.9, -0.78867, -22.4, 8.8, -0.78867, -21.2, 16.3, -0.78867, -48.2, 8.8, -0.78867, -21.2, 8.8, -0.78867, -19.4, 48.1, -0.78867, -19.7, 48.1, -0.78867, -26.9, 26.8, -0.78867, -48.2, 8.8, -0.78867, -19.4, 8.8, -0.78867, -17.9, 48.1, -0.78867, -17.6, 48.1, -0.78867, -19.7, -7.4, 9.01133, -19.1, -7.4, 9.01133, -18.2, -1.1, 9.01133, -18.2, -1.1, 9.01133, -19.1, 5.2, 9.01133, -19.1, -1.1, 9.01133, -19.1, -1.1, 9.01133, -18.2, 5.2, 9.01133, -18.2, 8.5, -0.78867, -15.5, 6.7, -0.78867, -14.6, 5.8, -0.78867, -12.5, -2.9, -0.78867, 8.2, 48.1, -0.78867, 8.2, 48.1, -0.78867, 1.6, 2.8, -0.78867, -12.2, -3.2, -0.78867, 7.6, -2.9, -0.78867, 8.2, 5.8, -0.78867, -12.5, 48.1, -0.78867, -4.7, 48.1, -0.78867, -11.3, 8.5, -0.78867, -15.5, 48.1, -0.78867, 1.6, 48.1, -0.78867, -4.7, 8.5, -0.78867, -15.5, 48.1, -0.78867, -17.6, 8.8, -0.78867, -17.9, 8.5, -0.78867, -15.5, 48.1, -0.78867, -11.3, -29.9, -0.78867, -5.9, -9.8, -0.78867, -14.9, -10.7, -0.78867, -15.8, -30.8, -0.78867, -6.8, -29.6, -0.78867, -1.7, -30.5, -0.78867, -0.199997, -29.6, -0.78867, 0.700001, -8.6, -0.78867, 7.6, -7.4, -0.78867, 6.4, -5.9, -0.78867, 6.4, -5.9, -0.78867, -14.6, -29.6, -0.78867, 4.6, -30.8, -0.78867, 5.8, -8.6, -0.78867, 7.6, -7.4, -0.78867, 6.4, -5.9, -0.78867, -14.6, -9.8, -0.78867, -14.9, -29.9, -0.78867, -5.9, -29.6, -0.78867, -1.7, -8.6, -0.78867, 7.6, -29.6, -0.78867, 0.700001, -29.6, -0.78867, 4.6, -8.6, -0.78867, 7.6, 1.3, -0.78867, -13.1, 0.700001, -0.78867, -14.6, -5.9, -0.78867, -14.6, 2.8, -0.78867, -12.2, 1.3, -0.78867, -13.1, -5.9, -0.78867, -14.6, -5.9, -0.78867, 6.4, -4.4, -0.78867, 6.4, -4.4, -0.78867, 6.4, -3.2, -0.78867, 7.6, 2.8, -0.78867, -12.2, -35, -0.78867, 0.700001, -34.1, -0.78867, -0.499996, -35.3, -0.78867, -1.7, -35, -0.78867, 4.3, -35, -0.78867, 0.700001, -35.3, -0.78867, -1.7, -48.2, -0.78867, -6.2, -48.2, -0.78867, 4.3, -35.3, -0.78867, -1.7, -35, -0.78867, -6.2, -48.2, -0.78867, -6.2, -8.9, -0.78867, 13.6, -7.4, -0.78867, 12.4, -8.9, -0.78867, 10.9, -30.8, -0.78867, 5.8, -33.5, -0.78867, 6.1, -35, -0.78867, 4.3, -48.2, -0.78867, 4.3, -48.2, -0.78867, 15.1, -48.2, -0.78867, 37, -48.2, -0.78867, 48.1, -37.7, -0.78867, 48.1, -48.2, -0.78867, 26.2, -48.2, -0.78867, 37, -27.2, -0.78867, 48.1, -16.7, -0.78867, 48.1, -8, -0.78867, 17.5, -30.8, -0.78867, 5.8, -30.8, -0.78867, 5.8, -33.5, -0.78867, 6.1, -48.2, -0.78867, 15.1, -48.2, -0.78867, 26.2, -8.9, -0.78867, 10.9, -8.6, -0.78867, 7.6, -30.8, -0.78867, 5.8, -5.9, -0.78867, 48.1, -5.9, -0.78867, 17.8, -8, -0.78867, 17.5, -16.7, -0.78867, 48.1, -48.2, -0.78867, 37, -37.7, -0.78867, 48.1, -27.2, -0.78867, 48.1, -8.9, -0.78867, 16.3, -8.9, -0.78867, 13.6, -30.8, -0.78867, 5.8, -8, -0.78867, 17.5, -8.9, -0.78867, 16.3, -30.8, -0.78867, 5.8, -2.9, -0.78867, 16, 48.1, -0.78867, 16, 48.1, -0.78867, 8.2, -2.9, -0.78867, 8.2, 41.2, -0.78867, 48.1, 48.1, -0.78867, 48.1, 48.1, -0.78867, 40, 34.6, -0.78867, 48.1, 41.2, -0.78867, 48.1, 48.1, -0.78867, 40, 34.6, -0.78867, 48.1, 48.1, -0.78867, 40, 48.1, -0.78867, 31.9, 27.7, -0.78867, 48.1, -2.9, -0.78867, 16, 14.2, -0.78867, 48.1, 21.1, -0.78867, 48.1, 48.1, -0.78867, 23.8, 48.1, -0.78867, 16, -3.8, -0.78867, 17.5, -5.9, -0.78867, 17.8, -5.9, -0.78867, 48.1, 0.700001, -0.78867, 48.1, -2.9, -0.78867, 16, 7.6, -0.78867, 48.1, 14.2, -0.78867, 48.1, 21.1, -0.78867, 48.1, 27.7, -0.78867, 48.1, 48.1, -0.78867, 31.9, 48.1, -0.78867, 23.8, -2.9, -0.78867, 16, -3.8, -0.78867, 17.5, 0.700001, -0.78867, 48.1, 7.6, -0.78867, 48.1 )
polygons = [ PoolIntArray( 1, 0, 2 ), PoolIntArray( 2, 0, 3 ), PoolIntArray( 4, 6, 5 ), PoolIntArray( 8, 7, 9 ), PoolIntArray( 9, 7, 12 ), PoolIntArray( 9, 12, 11 ), PoolIntArray( 9, 11, 10 ), PoolIntArray( 14, 13, 15 ), PoolIntArray( 15, 13, 16 ), PoolIntArray( 19, 18, 17 ), PoolIntArray( 22, 21, 20 ), PoolIntArray( 24, 23, 25 ), PoolIntArray( 25, 23, 26 ), PoolIntArray( 27, 29, 28 ), PoolIntArray( 33, 32, 30 ), PoolIntArray( 30, 32, 31 ), PoolIntArray( 37, 36, 34 ), PoolIntArray( 34, 36, 35 ), PoolIntArray( 38, 40, 39 ), PoolIntArray( 43, 42, 41 ), PoolIntArray( 45, 44, 46 ), PoolIntArray( 46, 44, 47 ), PoolIntArray( 50, 49, 48 ), PoolIntArray( 53, 52, 54 ), PoolIntArray( 54, 52, 51 ), PoolIntArray( 56, 55, 57 ), PoolIntArray( 57, 55, 60 ), PoolIntArray( 57, 60, 59 ), PoolIntArray( 57, 59, 58 ), PoolIntArray( 61, 64, 62 ), PoolIntArray( 62, 64, 63 ), PoolIntArray( 68, 67, 65 ), PoolIntArray( 65, 67, 66 ), PoolIntArray( 72, 71, 69 ), PoolIntArray( 69, 71, 70 ), PoolIntArray( 74, 73, 75 ), PoolIntArray( 75, 73, 76 ), PoolIntArray( 76, 73, 78 ), PoolIntArray( 76, 78, 77 ), PoolIntArray( 80, 79, 81 ), PoolIntArray( 81, 79, 82 ), PoolIntArray( 85, 84, 83 ), PoolIntArray( 86, 88, 87 ), PoolIntArray( 90, 89, 91 ), PoolIntArray( 91, 89, 92 ), PoolIntArray( 94, 93, 95 ), PoolIntArray( 95, 93, 96 ), PoolIntArray( 98, 97, 99 ), PoolIntArray( 99, 97, 100 ), PoolIntArray( 103, 102, 101 ), PoolIntArray( 106, 105, 104 ), PoolIntArray( 107, 112, 108 ), PoolIntArray( 108, 112, 109 ), PoolIntArray( 109, 112, 111 ), PoolIntArray( 109, 111, 110 ), PoolIntArray( 115, 114, 113 ), PoolIntArray( 118, 117, 116 ), PoolIntArray( 120, 119, 121 ), PoolIntArray( 121, 119, 123 ), PoolIntArray( 121, 123, 122 ), PoolIntArray( 126, 125, 124 ), PoolIntArray( 129, 128, 127 ), PoolIntArray( 131, 130, 132 ), PoolIntArray( 132, 130, 134 ), PoolIntArray( 132, 134, 133 ), PoolIntArray( 137, 136, 135 ), PoolIntArray( 139, 138, 140 ), PoolIntArray( 140, 138, 141 ), PoolIntArray( 143, 142, 144 ), PoolIntArray( 144, 142, 145 ), PoolIntArray( 148, 147, 146 ), PoolIntArray( 150, 149, 151 ), PoolIntArray( 151, 149, 152 ), PoolIntArray( 152, 149, 154 ), PoolIntArray( 152, 154, 153 ), PoolIntArray( 156, 155, 157 ), PoolIntArray( 157, 155, 158 ), PoolIntArray( 161, 160, 159 ), PoolIntArray( 163, 162, 164 ), PoolIntArray( 164, 162, 165 ), PoolIntArray( 168, 167, 166 ), PoolIntArray( 171, 170, 169 ), PoolIntArray( 174, 173, 172 ), PoolIntArray( 178, 177, 175 ), PoolIntArray( 175, 177, 176 ), PoolIntArray( 181, 180, 179 ), PoolIntArray( 184, 183, 182 ), PoolIntArray( 185, 188, 186 ), PoolIntArray( 186, 188, 187 ), PoolIntArray( 190, 189, 191 ), PoolIntArray( 191, 189, 192 ), PoolIntArray( 192, 189, 193 ), PoolIntArray( 195, 194, 196 ), PoolIntArray( 196, 194, 197 ), PoolIntArray( 200, 199, 198 ), PoolIntArray( 202, 201, 203 ), PoolIntArray( 203, 201, 204 ), PoolIntArray( 206, 205, 207 ), PoolIntArray( 207, 205, 208 ) ]
agent/height = 4.0
agent/radius = 1.55

[node name="Scene" type="Node"]

[node name="canvas" parent="." instance=ExtResource( 2 )]

[node name="PlayerSpawner" parent="." instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -12.9434, 1.5, 0 )
moneyCount = 500
itemCodes = [ "shotgun12", "pistol10-silenced", "autorifle762", "coat", "rifle307", "submachine10" ]
ammo = {
"ammo10": 50,
"ammo12": 20,
"ammo307": 10,
"ammo762": 50
}

[node name="npc" type="Node" parent="."]

[node name="facetest" parent="npc" instance=ExtResource( 9 )]
transform = Transform( -0.0242404, 0, 0.999706, 0, 1, 0, -0.999706, 0, -0.0242404, 32.773, 0, -9.20512 )
dialogueCode = "startDialogue"
weaponCode = "revolver32"

[node name="terrain" type="StaticBody" parent="."]
collision_layer = 3
collision_mask = 3
physics_material_override = ExtResource( 6 )

[node name="MeshInstance" type="MeshInstance" parent="terrain"]
transform = Transform( 50, 0, 0, 0, 1, 0, 0, 0, 50, 0, 0, 0 )
mesh = SubResource( 1 )
material/0 = null

[node name="CollisionShape" type="CollisionShape" parent="terrain"]
shape = SubResource( 2 )

[node name="props" type="Spatial" parent="terrain"]

[node name="cabinet" parent="terrain/props" instance=ExtResource( 4 )]
transform = Transform( 1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, -32.4589, 2.91461, -3.64411 )
collision_layer = 3
collision_mask = 3
physics_material_override = ExtResource( 7 )
SpawnRandomItems = true
chestCode = "cabinet"
startItemCodes = [ "noteTest", "ak47", "autorifle762" ]
startAmmoCount = {
"ammo762": 20
}

[node name="metallic-cabinet" parent="terrain/props" instance=ExtResource( 20 )]
transform = Transform( 1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, -32.3488, 2.99856, 2.5442 )
collision_layer = 3
collision_mask = 3
SpawnRandomItems = true
chestCode = "cabinet"
startItemCodes = [ "plasmaPistol", "shotgun20" ]
startAmmoCount = {
"ammo20": 20,
"ammoEnergy": 40
}

[node name="door" parent="terrain/props" instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -5.4294, 0, 13.7221 )
collision_layer = 3
collision_mask = 3
myKey = "key0"
ForceOpening = true

[node name="terminal" parent="terrain/props" instance=ExtResource( 8 )]
transform = Transform( -1.62921e-07, 0, -1, 0, 1, 0, 1, 0, -1.62921e-07, 3.72852, 4.31248, -16.132 )
collision_layer = 3
collision_mask = 3
files = PoolStringArray( "test", "test2", "test3", "test4" )

[node name="box" type="StaticBody" parent="terrain/props"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -5.87655, 0.981555, 9.40208 )
collision_layer = 3
collision_mask = 3
physics_material_override = ExtResource( 6 )

[node name="MeshInstance" type="MeshInstance" parent="terrain/props/box"]
mesh = SubResource( 3 )
material/0 = null

[node name="CollisionShape" type="CollisionShape" parent="terrain/props/box"]
shape = SubResource( 4 )

[node name="box3" type="StaticBody" parent="terrain/props"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -5.87655, 0.981555, 14.9577 )
collision_layer = 3
collision_mask = 3
physics_material_override = ExtResource( 6 )

[node name="MeshInstance" type="MeshInstance" parent="terrain/props/box3"]
mesh = SubResource( 3 )
material/0 = null

[node name="CollisionShape" type="CollisionShape" parent="terrain/props/box3"]
shape = SubResource( 4 )

[node name="box2" type="StaticBody" parent="terrain/props"]
transform = Transform( 8, 0, 0, 0, 5, 0, 0, 0, 2, -1.08094, 4.611, -18.6128 )
collision_layer = 3
collision_mask = 3
physics_material_override = ExtResource( 6 )

[node name="MeshInstance" type="MeshInstance" parent="terrain/props/box2"]
mesh = SubResource( 3 )
material/0 = null

[node name="CollisionShape" type="CollisionShape" parent="terrain/props/box2"]
shape = SubResource( 4 )

[node name="DirectionalLight" type="DirectionalLight" parent="terrain"]
transform = Transform( 1, 0, 0, 0, -0.189096, 0.981959, 0, -0.981959, -0.189096, 0, 8.63824, 0 )
shadow_enabled = true

[node name="covers" type="Node" parent="terrain"]
script = ExtResource( 11 )

[node name="1" type="Spatial" parent="terrain/covers"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -18.7832 )

[node name="1" type="Spatial" parent="terrain/covers/1"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -5.79724 )

[node name="2" type="Spatial" parent="terrain/covers/1"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 7.10719 )

[node name="2" type="Spatial" parent="terrain/covers"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -32.368, 0, 2.70287 )

[node name="1" type="Spatial" parent="terrain/covers/2"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -3.11258, 0, -0.0895691 )

[node name="2" type="Spatial" parent="terrain/covers/2"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 3.33775, 0, -0.328845 )

[node name="patrolPoint1" type="Spatial" parent="terrain"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 26.8235, 4.06153, -27.6242 )

[node name="patrolPoint2" type="Spatial" parent="terrain"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -24.9139, 4.06153, 42.2418 )

[node name="randomItems" type="Node" parent="."]
script = ExtResource( 3 )
maxItemsCount = 10
maxMoneyCount = 50
itemCodes = [ "mentats", "dash", "maffin", "ammo307", "ammo32", "revolver32", "bow-ribbon", "heal-potion", "laserPistol", "plasmaPistol" ]
ammoCount = {
"ammo307": 10,
"ammo32": 20
}

[node name="Navigation" type="Navigation" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.99967, 0 )

[node name="mesh" type="NavigationMeshInstance" parent="Navigation"]
navmesh = SubResource( 5 )
